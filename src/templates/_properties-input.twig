{# @param propertiesFieldConfig array The list of configured properties #}
{# @param properties array the property values as stored in the database #}
{# @param element Element The currently edited element #}
{# @param field Field The field type #}
{# @param settings Settings The plugin settings #}


{% import '_includes/forms.twig' as forms %}


{% namespace field.handle %}
    <table class="editable fullwidth">

        {% if settings.showTableHeader %}
            <thead>
            <tr>
                <th scope="col" class="singleline-cell textual">{{ 'Property'|t }}</th>
                <th scope="col" class="multiline-cell textual">{{ 'Value'|t }}</th>
            </tr>
            </thead>
        {% endif %}

        <tbody>
        {% for propertyConfig in propertiesFieldConfig %}
            <tr>
                <th class="heading-cell thin" style="text-align: left; padding: 7px;">
                    {{ propertyConfig.name|t }}
                    {% if propertyConfig.instructions ?? null %}
                        <span class="info">
                            {{ propertyConfig.instructions|t }}
                        </span>
                    {% endif %}
                    {% if propertyConfig.required ?? false %}
                        <span class="required"></span>
                    {% endif %}
                </th>

                <td class="singleline-cell textual">

                    {% set template = settings.extraPropertiesConfig[propertyConfig.type].template ?? settings.propertiesConfig[propertyConfig.type].template %}

                    {{ craft.app.view.renderTemplate(template, {
                        propertyConfig,
                        value: properties[propertyConfig.handle] ?? null,
                        settings
                    }, 'cp')|raw }}

                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endnamespace %}

{% css %}
.text-combined {
    border: 1px solid gray !important;
}
.text-margin {
    margin-left: 8px;
}
{% endcss %}